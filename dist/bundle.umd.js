!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).bundle=e()}(this,(function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function t(t,e,r,n){return new(r||(r=Promise))((function(a,s){function i(t){try{u(n.next(t))}catch(t){s(t)}}function o(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?a(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,o)}u((n=n.apply(t,e||[])).next())}))}function e(t,e){var r,n,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}}Date.now||(Date.now=function(){return(new Date).getTime()}),Array.isArray||(Array.isArray=function(t){return"[object, Array]"===Object.prototype.toString.call(t)}),function(){for(var t=["webkit","moz"],e=0;e<t.length&&!window.requestAnimationFrame;++e){var r=t[e];window.requestAnimationFrame=window[r+"RequestAnimationFrame"],window.cancelAnimationFrame=window[r+"CancelAnimationFrame"]||window[r+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var n=0;window.requestAnimationFrame=function(t){var e=Date.now(),r=Math.max(n+16,e);return setTimeout((function(){t(n=r)}),r-e)},window.cancelAnimationFrame=clearTimeout}}();var r=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY"],n=["opacity","borderRadius","color","backgroundColor"],a=["px","em","rem","vw","vh","deg","%"],s={easeIn:function(t,e,r,n,a,s){var i;return 0===t?e:1===(t/=n)?e+r:(s||(s=.3*n),!a||a<Math.abs(r)?(i=s/4,a=r):i=s/(2*Math.PI)*Math.asin(r/a),-a*Math.pow(2,10*(t-=1))*Math.sin((t*n-i)*(2*Math.PI)/s)+e)},easeOut:function(t,e,r,n,a,s){var i;return 0===t?e:1===(t/=n)?e+r:(s||(s=.3*n),!a||a<Math.abs(r)?(a=r,i=s/4):i=s/(2*Math.PI)*Math.asin(r/a),a*Math.pow(2,-10*t)*Math.sin((t*n-i)*(2*Math.PI)/s)+r+e)},easeInOut:function(t,e,r,n,a,s){var i;return 0===t?e:2===(t/=n/2)?e+r:(s||(s=n*(.3*1.5)),!a||a<Math.abs(r)?(a=r,i=s/4):i=s/(2*Math.PI)*Math.asin(r/a),t<1?a*Math.pow(2,10*(t-=1))*Math.sin((t*n-i)*(2*Math.PI)/s)*-.5+e:a*Math.pow(2,-10*(t-=1))*Math.sin((t*n-i)*(2*Math.PI)/s)*.5+r+e)}},i={easeIn:function(t,e,r,n){return r-i.easeOut(n-t,0,r,n)+e},easeOut:function(t,e,r,n){return(t/=n)<1/2.75?r*(7.5625*t*t)+e:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+e:r*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOut:function(t,e,r,n){return t<n/2?.5*i.easeIn(2*t,0,r,n)+e:.5*i.easeOut(2*t-n,0,r,n)+.5*r+e}},o={easeIn:function(t,e,r,n,a){return a||(a=1.70158),r*(t/=n)*t*((a+1)*t-a)+e},easeOut:function(t,e,r,n,a){return a||(a=1.70158),r*((t=t/n-1)*t*((a+1)*t+a)+1)+e},easeInOut:function(t,e,r,n,a){return a||(a=1.70158),(t/=n/2)<1?r/2*(t*t*((1+(a*=1.525))*t-a))+e:r/2*((t-=2)*t*((1+(a*=1.525))*t+a)+2)+e}},u={elasticEaseIn:s.easeIn,elasticEaseOut:s.easeOut,elasticEaseInOut:s.easeInOut,bounceEaseIn:i.easeIn,bounceEaseOut:i.easeOut,bounceEaseInOut:i.easeInOut,backEaseIn:o.easeIn,backEaseOut:o.easeOut,backEaseInOut:o.easeInOut},c="function"==typeof Float32Array;function h(t,e){return 1-3*e+3*t}function l(t,e){return 3*e-6*t}function p(t){return 3*t}function f(t,e,r){return((h(e,r)*t+l(e,r))*t+p(e))*t}function d(t,e,r){return 3*h(e,r)*t*t+2*l(e,r)*t+p(e)}function y(t){return t}var g=function(t,e,r,n){if(!(0<=t&&t<=1&&0<=r&&r<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&r===n)return y;for(var a=c?new Float32Array(11):new Array(11),s=0;s<11;++s)a[s]=f(.1*s,t,r);function i(e){for(var n=0,s=1;10!==s&&a[s]<=e;++s)n+=.1;--s;var i=n+.1*((e-a[s])/(a[s+1]-a[s])),o=d(i,t,r);return o>=.001?function(t,e,r,n){for(var a=0;a<4;++a){var s=d(e,r,n);if(0===s)return e;e-=(f(e,r,n)-t)/s}return e}(e,i,t,r):0===o?i:function(t,e,r,n,a){var s,i,o=0;do{(s=f(i=e+(r-e)/2,n,a)-t)>0?r=i:e=i}while(Math.abs(s)>1e-7&&++o<10);return i}(e,n,n+.1,t,r)}return function(t){return 0===t?0:1===t?1:f(i(t),e,n)}};function v(t){if(!t)return"";var e="";switch(!0){case/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t):e=function(t){var e=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,r,n){return e+e+r+r+n+n})),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(r){var n=parseInt(r[1],16),a=parseInt(r[2],16),s=parseInt(r[3],16);return"rgba("+n+","+a+","+s+",1)"}return""}(t);break;case/^rgb/.test(t):e=function(t){if(t.includes("rgba"))return t;return"rgba("+t.replace(/rgb\((\d+,\s*\d+,\s*\d+)\)/,"$1")+", 1)"}(t);break;case/^hsl/.test(t):e=function(t){var e=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(t);if(!e)return"";var r,n,a,s=parseInt(e[1],10)/360,i=parseInt(e[2],10)/100,o=parseInt(e[3],10)/100,u=Number(e[4])||1;function c(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}if(0===i)r=n=a=o;else{var h=o<.5?o*(1+i):o+i-o*i,l=2*o-h;r=c(l,h,s+1/3),n=c(l,h,s),a=c(l,h,s-1/3)}return"rgba("+Math.floor(255*r)+","+Math.floor(255*n)+","+Math.floor(255*a)+","+u.toFixed(1)+")"}(t)}return e||(console.error("颜色格式不正确："+t),"")}function b(t){var e=[],r=/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d+\.?\d*)\)$/i.exec(t);if(r&&r.length>=5)for(var n=1;n<5;n++)r[n]?e.push(Number(r[n])):e.push(0);return e}var m=function(t){return"number"==typeof t?t:Number(t.replace(/(-?\d+\.?\d*)\D*/,"$1"))},w=function(t){var e=[];switch(t){case"scale":e.push("scaleX"),e.push("scaleY");break;default:e.push(t)}return e},A=function(t){var e=0,r=-1;return t.forEach((function(t,n){t>=e&&(e=t,r=n)})),{index:r,value:e}},q=function(){function t(t,e,r,n,a,s,i){this.sequence=0,this.total=0,this.targets=[],this.duration=[],this.delay=[],this.ease="",this.paused=!1,this.pausedStart=0,this.aId=0,this.curPercent=0,this.startNode=[],this.translateX=[],this.translateY=[],this.translateZ=[],this.scaleX=[],this.scaleY=[],this.rotate=[],this.rotateX=[],this.rotateY=[],this.rotateZ=[],this.opacity=[],this.borderRadius=[],this.color=[],this.backgroundColor=[],this.colorCache=[],this.backgroundColorCache=[],this.sequence=t,this.targets=e,r&&this.initTime(r,this.duration),this.properties=n,this.properties.backgroundColor&&this.targets&&this.initColorCache("backgroundColor",this.backgroundColorCache),this.properties.color&&this.targets&&this.initColorCache("color",this.colorCache),s&&this.initTime(s,this.delay),this.ease=a||"linear",this.update=i}return t.prototype.initTime=function(t,e){"function"==typeof t?this.targets.forEach((function(r,n){var a=t(r,n);e.push(a)})):"number"==typeof t&&this.targets.forEach((function(r,n){e.push(t)}))},t.prototype.initColorCache=function(t,e){var r=this;this.targets.forEach((function(n,a){var s=v(r.properties[t]);e.push({end:b(s)})}))},t.prototype.initStartNode=function(){var t=this;this.startNode=[],this.targets.forEach((function(e,a){var s=t,i=e.style.transform||"";s.startNode.push({}),i&&i.split(" ").forEach((function(t){var e=function(t){return t.replace(/(\D+)\(-?\d+\.?\d*\D*\)/,"$1")}(t);if(t&&r.includes(e)){var n=function(t){return t.replace(/\D+\((-?\d+\.?\d*\D*)\)/,"$1")}(t);w(e).forEach((function(t){s[t].splice(a,1,n),s.startNode[a][t]=s[t][a]}))}else console.error("不支持该样式修改：",e)})),n.forEach((function(t){switch(t){case"opacity":case"borderRadius":var r=getComputedStyle(e)[t];r&&s[t]&&s.properties[t]&&(s[t].splice(a,1,r),s.startNode[a][t]=s[t][a]);break;case"color":case"backgroundColor":var n=getComputedStyle(e)[t];n&&s[t]&&s.properties[t]&&(n=v(n),s[t+"Cache"][a].start=b(n),s[t].splice(a,1,n),s.startNode[a][t]=s[t][a])}})),Object.keys(s.properties).forEach((function(t){w(t).forEach((function(t){if((n.includes(t)||r.includes(t))&&void 0===s.startNode[a][t]){var e=0;t.toLowerCase().indexOf("color")>-1?(e="rgba(0, 0, 0, 0)",s[t+"Cache"][a].start=[0,0,0,0]):["scaleX","scaleY","opacity"].includes(t)&&(e=1),s[t].splice(a,1,e),s.startNode[a][t]=s[t][a]}}))}))}))},t.prototype.play=function(){var t=this;return t.targets&&0!==t.targets.length?new Promise((function(e,r){var n=0,a=0,s=t.distinguishEase(t.ease),i=function(t){if(t.includes("cubic-bezier")){var e=t.replace(/cubic-bezier\(/g,"").replace(/\)/g,"").split(",");return 4!==e.length?void console.error("cubic-bezier参数个数不对！"):g(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3]))}switch(t){case"ease-in-out":return g(.94,0,.34,1);case"ease-in":return g(.64,.02,.64,.4);case"ease-out":return g(.1,.24,.25,.98)}return function(t){return t}}(t.ease);t.initStartNode(),t.aId=requestAnimationFrame((function r(o){if(n=n||o,t.paused)a=o-t.pausedStart;else{var u=o-a-n,c=0;t.targets.forEach((function(e,r){var n=t.delay[r]||0,a=t.duration[r]||0,o=u>n?u-n:0,h=o?Math.min(1,o/a):0;h=void 0===s&&i?i(h):h,c+=h,t.updateProperties(r,o>a?a:o,h,s)})),c/=t.targets.length,t.curPercent=Math.floor(100*(c+t.sequence-1)/t.total);var h=A(t.duration).value||0,l=A(t.delay).index;if(l>-1){var p=t.delay[l]||0;h=t.duration[l]+p}c>=1&&u>h?e(t):t.aId=requestAnimationFrame(r)}t.update&&t.update({sq:t.sequence,percent:t.curPercent})}))})):(console.error("target不能为空"),null)},t.prototype.pause=function(){this.paused=!0,this.pausedStart=Date.now()},t.prototype.stop=function(){cancelAnimationFrame(this.aId)},t.prototype.distinguishEase=function(t){return u[t]||void 0},t.prototype.updateProperties=function(t,e,a,s){for(var i=0,o=Object.keys(this.properties);i<o.length;i++){var u=o[i],c=this.properties[u];if(r.includes(u)&&void 0!==c)this.updateTransform(t,e,u,c,a,s);else if(n.includes(u)&&void 0!==c)switch(u){case"opacity":case"borderRadius":this.updateOtherProps(t,e,u,c,a,s);break;case"color":case"backgroundColor":this.updateColors(t,e,u,c,a,s)}else console.error("不支持该样式修改：",u)}this.updateDomStyle(t)},t.prototype.updateTransform=function(t,e,r,n,a,s){var i=this;w(r).forEach((function(r){i.updatePropsVal(!0,t,e,r,n,a,s)}))},t.prototype.updateOtherProps=function(t,e,r,n,a,s){this.updatePropsVal(!1,t,e,r,n,a,s)},t.prototype.updateColors=function(t,e,r,n,a,s){var i=this,o=i.startNode[t];o&&o[r]||(o[r]="rgba(0, 0, 0, 0)");var u=v(i[r][t]);if(void 0!==u&&u!==v(n)){var c=i[r+"Cache"][t],h=c.start,l=c.end;if(l&&h){var p="";l.forEach((function(r,n){p+=0===n?"rgba(":"";var o=s?s(e,h[n],r-h[n],i.duration[t]):i.getCurrentValue(h[n],r,a);p+=n>2?o.toFixed(1):Math.floor(o),p+=n===l.length-1?")":", "})),i[r][t]=p}}else i[r][t]=i.targets[t].style[r]},t.prototype.updatePropsVal=function(t,e,r,n,s,i,o){var u=this.startNode[e];u&&u[n]||(u[n]=["scale","opacity"].includes(n)?1:0);var c="string"==typeof s?m(s):s,h=function(t){if("number"==typeof t)return"";var e=t.replace(/-?\d+\.?\d*(\D*)/,"$1");return a.indexOf(e)>-1?e:(console.error("不支持该数值单位：",e),"")}(s);"number"!=typeof s||h||(h=function(t){switch(t){case"translateX":case"translateY":case"translateZ":case"borderRadius":return"px";case"rotate":case"rotateX":case"rotateY":case"rotateZ":return"deg";default:return""}}(n));var l="string"==typeof this[n][e]?m(this[n][e]):this[n][e];if(void 0!==l&&l!==c){var p=m(this.startNode[e][n]),f=o?o(r,p,c-p,this.duration[e]):this.getCurrentValue(p,c,i);this[n][e]=f.toFixed(2)+h}else this[n][e]=t?function(t,e){var r=t.style.transform,n=e.indexOf("scale")>-1?1:0,a="";return r&&r.split(" ").some((function(t,r){if(t.includes(e)){var s=new RegExp(e+"\\((-?\\d+\\.?\\d*)(\\D*)\\)","g");return n=Number(t.replace(s,"$1")),a=t.replace(s,"$2"),!0}return!1})),e.indexOf("scale")>-1?n:n+a}(this.targets[e],n):this.targets[e].style[n]},t.prototype.updateDomStyle=function(t){var e=this,a=this.targets[t];if(e.startNode[t]){var s=Object.keys(e.startNode[t]),i="";s.forEach((function(o,u){if(r.includes(o))i+=e.getTransformStr(t,o),u<s.length-1&&(i+=" ");else if(n.includes(o))switch(o){case"opacity":case"borderRadius":case"backgroundColor":case"color":a.style[o]=e[o][t]}})),a.style.transform=i}},t.prototype.getTransformStr=function(t,e){return e+"("+this[e][t]+")"},t.prototype.getCurrentValue=function(t,e,r){return e>=t?t+(e-t)*r:t-(t-e)*r},t}();return function(){function r(t){var e=this,r=t.target,n=t.loop,a=t.direction,s=t.begin,i=t.update,o=t.complete;this.targets=[],this.loop=!1,this.count=0,this.direction="normal",this.animeQueue=[],this.playing=!1,this.curAsq=0,Array.isArray(r)?r.forEach((function(t){e.initTarget(t)})):this.initTarget(r),this.loop=n||!1,this.direction=a||"normal",this.begin=s,this.update=i,this.complete=o}return r.prototype.initTarget=function(t){if("string"==typeof t&&document.querySelector(t))this.targets.push(document.querySelector(t));else{if("object"!=typeof t||1!==t.nodeType)return void console.error("target不合法！~");this.targets.push(t)}},r.prototype.animator=function(t){var e=t.duration,r=t.properties,n=t.ease,a=t.delay,s=this.animeQueue.length+1,i=new q(s,this.targets,e,r,n,a,this.update);return this.animeQueue.push(i),this},r.prototype.play=function(){return t(this,void 0,void 0,(function(){var t;return e(this,(function(e){switch(e.label){case 0:if(e.trys.push([0,11,,12]),!this.targets||0===this.targets.length)return console.error("target不能为空!!!"),[2];switch(this.curAsq<=0&&(this.count++,this.begin&&this.begin(this.count)),this.playing=!0,this.curAsq<=0&&(this.curAsq="alternate"===this.direction&&this.count%2==0||"reverse"===this.direction?this.animeQueue.length-1:0),this.direction){case"reverse":return[3,1];case"alternate":return[3,3];case"normal":return[3,8]}return[3,8];case 1:return[4,this.playReverse()];case 2:return e.sent(),[3,10];case 3:return this.count%2!=0?[3,5]:[4,this.playReverse()];case 4:return e.sent(),[3,7];case 5:return[4,this.playNormal()];case 6:e.sent(),e.label=7;case 7:return[3,10];case 8:return[4,this.playNormal()];case 9:e.sent(),e.label=10;case 10:return this.curAsq=0,this.complete&&this.complete(this.count),"boolean"==typeof this.loop&&this.loop||"number"==typeof this.loop&&this.loop>this.count?(this.resetNode(),this.play()):this.playing=!1,[3,12];case 11:return t=e.sent(),console.error(t),[3,12];case 12:return[2]}}))}))},r.prototype.playNormal=function(){return t(this,void 0,void 0,(function(){var t,r,n,a,s;return e(this,(function(e){switch(e.label){case 0:for(r in t=[],this.animeQueue)t.push(r);n=0,e.label=1;case 1:return n<t.length?(a=t[n],this.animeQueue[a]?((s=this.animeQueue[a]).total=this.animeQueue.length,s.sequence===this.curAsq&&(s.paused=!1),s.sequence>=this.curAsq?(this.curAsq=s.sequence,[4,s.play()]):[3,3]):[3,3]):[3,4];case 2:e.sent(),e.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},r.prototype.playReverse=function(){return t(this,void 0,void 0,(function(){var t,r;return e(this,(function(e){switch(e.label){case 0:t=this.animeQueue.length-1,e.label=1;case 1:return t>=0?((r=this.animeQueue[t]).total=this.animeQueue.length,r&&r.sequence===this.curAsq&&(r.paused=!1),r&&r.sequence<=this.curAsq?(this.curAsq=r.sequence,[4,r.play()]):[3,3]):[3,4];case 2:e.sent(),e.label=3;case 3:return t--,[3,1];case 4:return[2]}}))}))},r.prototype.pause=function(){var t=this;this.playing=!1,this.animeQueue.some((function(e){return e.sequence===t.curAsq&&(e.pause(),!0)}))},r.prototype.stop=function(){var t=this;this.animeQueue.forEach((function(e){e.sequence===t.curAsq&&(e.stop(),t.curAsq=0,t.playing=!1,t.count=0,t.resetNode()),e.paused=!1,e.pausedStart=0}))},r.prototype.resetNode=function(){this.targets.forEach((function(t,e){t.style.transform=""}))},r}()}));
